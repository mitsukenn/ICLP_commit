<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICLP コミット管理</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style"
        href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&family=Bebas+Neue&display=swap">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&family=Bebas+Neue&display=swap"
        rel="stylesheet" media="print" onload="this.media='all'">
    <noscript>
        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&family=Bebas+Neue&display=swap"
            rel="stylesheet">
    </noscript>
    <link rel="apple-touch-icon" sizes="180x180" href="ICLP-icon.png">
<link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <header class="header">
            <div class="header-left">
                <h1 class="header-title">ICLP COMMIT</h1>
                <p class="header-date" id="currentDate"></p>
                <div id="weeklyCommitHeader" class="weekly-commit-container" style="display: none;">
                    <div class="weekly-commit-header weekly-commit-box" id="weeklyLifeCommitHeader">
                        <div class="weekly-commit-header-label">今週の人生コミット🎯</div>
                        <div class="weekly-commit-header-text" id="weeklyCommitHeaderTextLife"></div>
                    </div>
                    <div class="weekly-commit-header weekly-commit-box" id="weeklyContributionCommitHeader">
                        <div class="weekly-commit-header-label">今週の貢献コミット👐</div>
                        <div class="weekly-commit-header-text" id="weeklyCommitHeaderTextContribution"></div>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div style="height: 0.25rem;"></div>
                <div class="countdown-item" id="nextEventCountdown"></div>
                <div class="countdown-item" id="completionCountdown"></div>
            </div>
        </header>

        <div class="menu-bar">
            <div class="streak-info">
                <div class="streak-badge fire">
                    <span>🔥</span>
                    <span id="currentStreak">連続: 0日</span>
                </div>
                <div class="streak-badge trophy">
                    <span>🏆</span>
                    <span id="maxStreak">最長: 0日</span>
                </div>
            </div>
        </div>

        <div class="content">
            <section class="section weekly-commit-section" id="weeklyCommitInputSection" style="display: none;">
                <h2 class="section-title">
                    📅 今週のコミット
                    <span class="weekly-period-badge" id="weeklyPeriodBadge"></span>
                </h2>

                <div class="input-group">
                    <label class="input-label">人生のコミット（今週やること）</label>
                    <div class="commit-list" id="weeklyLifeCommitList">
                        <div class="commit-item">
                            <textarea class="input-field auto-resize" placeholder="今週達成したいこと..."></textarea>
                        </div>
                    </div>
                    <button class="btn-add" onclick="addWeeklyLifeCommit()">+ コミットを追加</button>
                </div>

                <div class="input-group" style="margin-top: 1rem;">
                    <label class="input-label">貢献のコミット（誰に・意図）</label>
                    <textarea class="input-field auto-resize" id="weeklyContributionContent"
                        placeholder="今週の貢献のコミット..."></textarea>
                </div>

                <button class="btn btn-primary btn-weekly" onclick="saveWeeklyCommits()">週間コミットを保存</button>
            </section>

            <section class="section weekly-commit-section" id="weeklyCompletionSection" style="display: none;">
                <h2 class="section-title">
                    📅 週間コミットの完了チェック
                    <span class="weekly-period-badge" id="weeklyCompletionPeriodBadge"></span>
                </h2>

                <div class="weekly-commit-display">
                    <div class="weekly-commit-display-label">人生のコミット</div>
                    <div class="weekly-commit-display-text" id="weeklyLifeCommitDisplay">未設定</div>
                </div>
                <div class="weekly-commit-display">
                    <div class="weekly-commit-display-label">貢献のコミット</div>
                    <div class="weekly-commit-display-text" id="weeklyContributionDisplay">未設定</div>
                </div>

                <div class="completion-grid">
                    <div class="completion-item">
                        <span class="completion-label">人生のコミット：やると言ったことを</span>
                        <div class="completion-buttons">
                            <button class="completion-btn" onclick="setWeeklyCompletion('life', true)">やった</button>
                            <button class="completion-btn" onclick="setWeeklyCompletion('life', false)">やらなかった</button>
                        </div>
                    </div>
                    <div class="completion-item">
                        <span class="completion-label">貢献のコミット：やると言ったことを</span>
                        <div class="completion-buttons">
                            <button class="completion-btn"
                                onclick="setWeeklyCompletion('contribution', true)">やった</button>
                            <button class="completion-btn"
                                onclick="setWeeklyCompletion('contribution', false)">やらなかった</button>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary btn-weekly" onclick="saveWeeklyCompletion()">週間の完了を記録</button>
            </section>

            <section class="section">
                <div
                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.75rem;">
                    <h2 class="section-title" style="margin-bottom: 0;">今日の宣言</h2>
                    <button class="menu-btn" onclick="openDeclarationSettings()"
                        style="padding: 0.35rem 1rem; font-size: 0.8rem;">宣言を編集</button>
                </div>

                <div class="declaration-box" id="declaration1Display">
                    <div class="declaration-label">宣言1（完全固定）</div>
                    <div class="declaration-text" id="declaration1Text">
                        宣言を設定してください
                    </div>
                </div>

                <div class="declaration-box fixed">
                    <div class="declaration-label orange">宣言2（一部固定）</div>
                    <div class="declaration-text" id="declaration2Text">
                        私は重要です。私は違いを創る人です。私が違いを創るために手放すものは<input type="text" class="declaration-input" id="handOver">です。
                    </div>
                </div>
            </section>

            <section class="section">
                <h2 class="section-title">人生のコミット　やりたいこと・やるべきこと</h2>
                <div class="commit-list" id="lifeCommitList">
                    <div class="commit-item">
                        <textarea class="input-field auto-resize"></textarea>
                    </div>
                </div>
                <button class="btn-add" onclick="addLifeCommit()">+ コミットを追加</button>
            </section>

            <section class="section">
                <h2 class="section-title blue">貢献のコミット</h2>
                <div class="input-group">
                    <div style="display: flex; align-items: flex-start; gap: 0.5rem;">
                        <label class="input-label"
                            style="margin-bottom: 0; white-space: nowrap; min-width: fit-content; padding-top: 0.5rem;">誰に・意図：</label>
                        <textarea class="input-field auto-resize" id="contributionContent"></textarea>
                    </div>
                </div>
            </section>

            <button class="btn btn-primary" onclick="saveCommits()">コミットを保存</button>

            <section class="section" style="margin-top: 1.5rem; display: none;" id="dailyCompletionSection">
                <h2 class="section-title blue">今日の完了チェック</h2>
                <div class="completion-grid">
                    <div class="completion-item">
                        <span class="completion-label">人生のコミット：やると言ったことを</span>
                        <div class="completion-buttons">
                            <button class="completion-btn" onclick="setCompletion('life', true)">やった</button>
                            <button class="completion-btn" onclick="setCompletion('life', false)">やらなかった</button>
                        </div>
                    </div>
                    <div class="completion-item">
                        <span class="completion-label">貢献のコミット：やると言ったことを</span>
                        <div class="completion-buttons">
                            <button class="completion-btn" onclick="setCompletion('contribution', true)">やった</button>
                            <button class="completion-btn"
                                onclick="setCompletion('contribution', false)">やらなかった</button>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary btn-weekly" onclick="saveCompletion()">完了を記録</button>
            </section>

            <div class="calendar-section">
                <div class="calendar-header">
                    <div class="calendar-nav-wrapper">
                        <button class="calendar-nav" onclick="changeMonth(-1)">‹</button>
                        <h2 class="calendar-month" id="calendarMonth"></h2>
                        <button class="calendar-nav" onclick="changeMonth(1)">›</button>
                    </div>
                    <div class="calendar-stats">
                        <span class="calendar-total" id="calendarTotal">完了: 0日</span>
                        <span> / </span>
                        <span id="calendarRate">0日</span>
                    </div>
                </div>

                <div class="calendar-container">
                    <div class="calendar-weekdays">
                        <div class="saturday">土</div>
                        <div class="sunday">日</div>
                        <div>月</div>
                        <div>火</div>
                        <div>水</div>
                        <div>木</div>
                        <div>金</div>
                    </div>
                    <div class="calendar-days-grid" id="calendarDays"></div>
                </div>

                <div class="calendar-legend">
                    👑👑 = 両方やった　｜　👑 = 1つやった　｜　○ = 記録済(やらなかった)　｜　★ = 週間完了
                </div>
            </div>

            <div
                style="text-align: center; margin-top: 2rem; margin-bottom: 2rem; border-top: 1px solid #eee; padding-top: 2rem; display: flex; flex-direction: row; justify-content: center; align-items: center; gap: 1rem; flex-wrap: wrap;">

                <button class="btn" onclick="openExportModal()"
                    style="display: inline-block; width: auto; min-width: 140px; padding: 0.5rem 1.2rem; font-size: 0.85rem; font-weight: bold; background: #4CAF50; color: white; border-radius: 4px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-top:0;">📊
                    データ出力</button>

                <button class="usage-btn" onclick="openUsageModal()"
                    style="display: inline-block; position: static; color: #E65100; background: #FFF3E0; border: 1px solid #FFB74D; font-weight: bold; font-size: 0.85rem; padding: 0.5rem 1.2rem; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">⚠️
                    ご利用上の注意</button>
            </div>
        </div>
    </div>

    <div class="modal" id="breakdownModal">
        <div class="modal-content">
            <h3 class="modal-title">ブレークダウンの承認</h3>
            <div class="breakdown-text">
                私はやると言った事をやりませんでした。<br>
                私は私の言葉ではありませんでした。そしてそれ以上の意味はありません<br>
                ブレイクダウンとインテグリティアウトを私は承認します。<br>
                そして私はパワフルです
            </div>
            <button class="modal-btn" onclick="closeBreakdownModal()">承認する</button>
        </div>
    </div>

    <div class="modal" id="declarationModal">
        <div class="modal-content">
            <h3 class="modal-title">宣言の編集</h3>

            <div class="current-declaration" id="currentDeclaration1Display">
                <div style="margin-bottom: 0.75rem;">
                    <strong>現在の宣言1:</strong><br>
                    <div id="currentDeclaration1TextDisplay" style="margin-top: 0.5rem; white-space: pre-line;">
                        未設定
                    </div>
                </div>
            </div>

            <h4 style="margin-bottom: 0.75rem; font-weight: 700;">宣言1を編集</h4>

            <div class="input-group">
                <label class="input-label">宣言1の内容</label>
                <textarea class="input-field" id="declaration1Input" rows="4"></textarea>
            </div>

            <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 2px solid var(--border);">
                <h4 style="margin-bottom: 0.75rem; font-weight: 700;">宣言2を編集</h4>

                <div class="current-declaration"
                    style="background: linear-gradient(135deg, #FFF5F0 0%, #FFEDE0 100%); border-color: var(--primary);">
                    <div style="margin-bottom: 0.75rem;">
                        <strong>現在の宣言2:</strong><br>
                        <div id="currentDeclaration2TextDisplay" style="margin-top: 0.5rem; white-space: pre-line;">
                            私は重要です。私は違いを創る人です。私が違いを創るために手放すものは＿＿です。
                        </div>
                    </div>
                </div>

                <div class="input-group">
                    <label class="input-label">宣言2の内容</label>
                    <textarea class="input-field" id="declaration2Input" rows="3"
                        placeholder="例：私は重要です。私は違いを創る人です。私が違いを創るために手放すものは＿＿です。"></textarea>
                    <div style="font-size: 0.8rem; color: #666; margin-top: 0.25rem;">
                        ※「＿＿」の部分に毎日入力する欄が表示されます
                    </div>
                </div>
            </div>

            <button class="modal-btn" onclick="saveDeclarations()">保存</button>
            <button class="modal-btn modal-btn-secondary" onclick="closeDeclarationSettings()">キャンセル</button>
        </div>
    </div>

    <div class="modal" id="editDayModal">
        <div class="modal-content">
            <h3 class="modal-title">記録を編集</h3>
            <div class="edit-date-display" id="editDateDisplay"></div>

            <div class="input-group">
                <label class="input-label">貢献するもの</label>
                <input type="text" class="input-field" id="editHeroContribution">
            </div>

            <div class="input-group">
                <label class="input-label">手放すもの</label>
                <input type="text" class="input-field" id="editHandOver">
            </div>

            <div class="input-group">
                <label class="input-label">人生のコミット</label>
                <div class="commit-list" id="editLifeCommitList"></div>
            </div>

            <div class="input-group">
                <label class="input-label">誰に・意図（貢献のコミット）</label>
                <textarea class="input-field auto-resize" id="editContributionContent"></textarea>
            </div>

            <div class="completion-grid" style="margin-top: 0.75rem;">
                <div class="completion-item">
                    <span class="completion-label">人生のコミット：やると言ったことを</span>
                    <div class="completion-buttons">
                        <button class="completion-btn" onclick="setEditCompletion('life', true)">やった</button>
                        <button class="completion-btn" onclick="setEditCompletion('life', false)">やらなかった</button>
                    </div>
                </div>
                <div class="completion-item">
                    <span class="completion-label">貢献のコミット：やると言ったことを</span>
                    <div class="completion-buttons">
                        <button class="completion-btn" onclick="setEditCompletion('contribution', true)">やった</button>
                        <button class="completion-btn"
                            onclick="setEditCompletion('contribution', false)">やらなかった</button>
                    </div>
                </div>
            </div>

            <button class="modal-btn" onclick="saveEditedDay()">保存</button>
            <button class="modal-btn modal-btn-secondary" onclick="closeEditDayModal()">キャンセル</button>
        </div>
    </div>

    <div class="modal" id="editWeeklyModal">
        <div class="modal-content">
            <h3 class="modal-title" id="saturdayModalTitle" style="color: var(--blue);">📅 土曜日の記録を編集</h3>
            <div class="edit-date-display" id="editWeeklyDateDisplay" style="background: #E3F2FD; color: var(--blue);">
            </div>

            <div class="saturday-tabs">
                <button class="saturday-tab active" id="tabWeekly" onclick="switchSaturdayTab('weekly')">📅
                    週間コミット</button>
                <button class="saturday-tab daily" id="tabDaily" onclick="switchSaturdayTab('daily')">📝 1日コミット</button>
            </div>

            <div class="saturday-page active" id="pageWeekly">
                <div class="input-group">
                    <label class="input-label">人生のコミット（今週やること）</label>
                    <div class="commit-list" id="editWeeklyLifeCommitList"></div>
                    <button class="btn-add" onclick="addEditWeeklyLifeCommit()">+ コミットを追加</button>
                </div>

                <div class="input-group" style="margin-top: 1rem;">
                    <label class="input-label">貢献のコミット（誰に・意図）</label>
                    <textarea class="input-field auto-resize" id="editWeeklyContributionContent"></textarea>
                </div>

                <div class="completion-grid" style="margin-top: 0.75rem;">
                    <div class="completion-item">
                        <span class="completion-label">人生のコミット：やると言ったことを</span>
                        <div class="completion-buttons">
                            <button class="completion-btn" onclick="setEditWeeklyCompletion('life', true)">やった</button>
                            <button class="completion-btn"
                                onclick="setEditWeeklyCompletion('life', false)">やらなかった</button>
                        </div>
                    </div>
                    <div class="completion-item">
                        <span class="completion-label">貢献のコミット：やると言ったことを</span>
                        <div class="completion-buttons">
                            <button class="completion-btn"
                                onclick="setEditWeeklyCompletion('contribution', true)">やった</button>
                            <button class="completion-btn"
                                onclick="setEditWeeklyCompletion('contribution', false)">やらなかった</button>
                        </div>
                    </div>
                </div>

                <button class="modal-btn btn-weekly" onclick="saveEditedWeeklyCommit()">週間コミットを保存</button>
            </div>

            <div class="saturday-page" id="pageDaily">
                <div class="input-group">
                    <label class="input-label">手放すもの</label>
                    <input type="text" class="input-field" id="editSaturdayHandOver">
                </div>

                <div class="input-group">
                    <label class="input-label">人生のコミット（今日やること）</label>
                    <div class="commit-list" id="editSaturdayLifeCommitList"></div>
                    <button class="btn-add" onclick="addEditSaturdayLifeCommit()">+ コミットを追加</button>
                </div>

                <div class="input-group">
                    <label class="input-label">貢献のコミット（誰に・意図）</label>
                    <textarea class="input-field auto-resize" id="editSaturdayContributionContent"></textarea>
                </div>

                <div class="completion-grid" style="margin-top: 0.75rem;">
                    <div class="completion-item">
                        <span class="completion-label">人生のコミット：やると言ったことを</span>
                        <div class="completion-buttons">
                            <button class="completion-btn"
                                onclick="setEditSaturdayCompletion('life', true)">やった</button>
                            <button class="completion-btn"
                                onclick="setEditSaturdayCompletion('life', false)">やらなかった</button>
                        </div>
                    </div>
                    <div class="completion-item">
                        <span class="completion-label">貢献のコミット：やると言ったことを</span>
                        <div class="completion-buttons">
                            <button class="completion-btn"
                                onclick="setEditSaturdayCompletion('contribution', true)">やった</button>
                            <button class="completion-btn"
                                onclick="setEditSaturdayCompletion('contribution', false)">やらなかった</button>
                        </div>
                    </div>
                </div>

                <button class="modal-btn btn-primary" onclick="saveEditedSaturdayDaily()">1日コミットを保存</button>
            </div>

            <button class="modal-btn modal-btn-secondary" onclick="closeEditWeeklyModal()"
                style="margin-top: 0.5rem;">閉じる</button>
        </div>
    </div>

    <div class="modal" id="usageModal">
        <div class="modal-content">
            <h3 class="modal-title">ご利用上の注意</h3>
            <div class="usage-note-content">
                <div class="usage-note-section">
                    <div class="usage-note-title">①データは端末内にのみ保存されます</div>
                    <p>入力した内容はご利用のデバイス（スマホ・タブレット・PC）にのみ保存され、外部サーバーへ送信されることはありません。第三者に見られる心配はありませんのでご安心ください。</p>
                </div>
                <div class="usage-note-section">
                    <div class="usage-note-title">②オフラインでも利用可能です</div>
                    <p>インターネット通信を行わないため、機内モード等のオフライン環境でもご利用いただけます。</p>
                </div>
                <div class="usage-note-section">
                    <div class="usage-note-title">③デバイス間の同期はできません</div>
                    <p>データは端末ごとに保存されます。スマートフォンで入力した内容をパソコンで見る（同期する）ことはできませんのでご注意ください。</p>
                </div>
            </div>
            <button class="modal-btn" onclick="closeUsageModal()">閉じる</button>
        </div>
    </div>

    <div class="modal" id="exportModal">
        <div class="modal-content">
            <h3 class="modal-title">データ出力</h3>
            <div style="text-align: center; margin-bottom: 2rem;">
                <button class="btn" onclick="copyAllData()"
                    style="background: #4CAF50; color: white; margin-bottom: 1rem; width: 100%;">📋 全データをコピー
                    (スマホ用)</button>
                <div
                    style="text-align: left; font-size: 0.9rem; color: #555; background: #f5f5f5; padding: 1rem; border-radius: 8px;">
                    <strong>【ご利用方法】</strong><br>
                    ①上のボタンを押すと全データがコピーされます。<br>
                    ②Googleスプレッドシート等のアプリを開いてください。<br>
                    ③A1セルを選択して「貼り付け」をすると完了です。<br>
                    ※PCでも同様に使えます。
                </div>
            </div>
            <button class="modal-btn" onclick="closeExportModal()">閉じる</button>
        </div>
    </div>

    <div class="toast" id="toast"></div>

<script src="app.js" defer></script>
</body>

</html>
